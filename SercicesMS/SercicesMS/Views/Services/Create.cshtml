@model SercicesMS.Models.Service

@{
    ViewBag.Title = "添加应用";

}

<div class="page-header">
    <h2>添加应用</h2>

</div>

<form class="form-horizontal " role="form" action="/Services/Create" method="post" enctype="multipart/form-data">
    @Html.AntiForgeryToken()


 
    <div class="form-group">
        <label for="inputfile" class="col-sm-2 control-label">上传图片</label>
        <div class="col-sm-10">
            <img src="~/File/no_picture.png" id="xmTanImg" height="200" />
            <div id="xmTanDiv"></div>
            <input type="file" name="Pic"  id=" xdaTanFileImg inputfile" onchange="xmTanUploadImg(this)" accept="image/*" />
        </div>
    </div>
    
        <div class="form-group">
                <label for="S_Name" class="col-sm-2 control-label">服务名称</label>
            <div class="col-sm-8">
                <input  type="text" class="form-control"  placeholder="请输入服务名称" data-val="true" data-val-required="服务名称 字段是必需的。" id="S_Name" name="S_Name"   />
            </div>
        </div>

        <div class="form-group">
            <label for="S_Path" class="col-sm-2 control-label">服务地址</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="请输入服务地址" data-val="true" data-val-required="服务地址 字段是必需的。" id="S_Path" name="S_Path"  />
            </div>
        </div>

        <div class="form-group">
            <label for="S_User" class="col-sm-2 control-label">用户名</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="请输入用户名" id="S_User" name="S_User"  />
            </div>
        </div>

        <div class="form-group">
            <label for="S_Pwd" class="col-sm-2 control-label">用户密码</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="请输入用户密码" data-val="true" data-val-minlength="字段 用户密码 必须是最小长度为“6”的字符串或数组类型。" data-val-minlength-min="6" id="S_Pwd" name="S_Pwd" />
            </div>
        </div>

        <div class="form-group">
            <label for="S_Admin" class="col-sm-2 control-label">负责人</label>
            <div class="col-sm-8">
                <input type="text" class="form-control" placeholder="请输入负责人" id="S_Admin" name="S_Admin" />
            </div>
        </div>

        <div class="form-group">
            <label for="S_Remark" class="col-sm-2 control-label">备注</label>
            <div class="col-sm-8">
                <textarea type="text" class="form-control text-box" placeholder="请添加备注信息" rows="5" id="S_Remark" name="S_Remark"></textarea>
            </div> 
        </div>
        
        <div  class="form-group container" >
            
                <input  type="submit" class="btn btn-default center-block" value="添加"  />
           
        </div>
</form>



<div>
    @Html.ActionLink("返回列表", "Inf")
</div>

<script type="text/javascript">
    //判断浏览器是否支持FileReader接口

    if (typeof FileReader == 'undefined') {
        document.getElementById('xmTanDiv').innerHTML = "<h1>当前浏览器不支持FileReader接口</h1>";
        //使选择控件不可操作
        document.getElementById("xdaTanFileImg").setAttribute("disabled", "disabled");
    }
    function xmTanUploadImg(obj) {
        var file = obj.files[0];
        console.log(obj);
        console.log(file);
        console.log("file.size = " + file.size);  //file.size 单位为byte
        var reader = new FileReader();


        //读取文件过程方法
        reader.onloadstart = function (e) {
            console.log("开始读取....");
        }
        reader.onprogress = function (e) {
            console.log("正在读取中....");
        }
        reader.onabort = function (e) {
            console.log("中断读取....");
        }
        reader.onerror = function (e) {
            console.log("读取异常....");
        }
        reader.onload = function (e) {
            console.log("成功读取....");

            var img = document.getElementById("xmTanImg");
            img.src = e.target.result;
            //或者 img.src = this.result;  //e.target == this
        }

        reader.readAsDataURL(file)



    }

</script>


